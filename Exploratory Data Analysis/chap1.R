

# ?Ø½?Æ® ?Ú·??Ð±?(1?? slide #7)
geyser <- read.table("geyser299.txt", header=T) # header : Ã¹??Â° ???? ??À» ?? ?Ì¸?À¸?? ?Þ¾Æµ??Ì´? ?Ô¼?
geyser
geyser[1:5,] # 5???????? ????

hist(geyser$waiting) # hist : ???????×·? ????

str(geyser) # str : ?Ú·??? ???????? ??????/??????, ?Ú·? ?? ?ÏºÎ¸? ????
ls() # ls : ???? ??Á¤?? ???? ????À» ??È¯

attach(geyser) # attach : ?????Í¸? R ?Ë»? ???Î¿? ?ß°??Ï¿? ??????À¸?? ?Ù·? Á¢???? ?? ?Ö°? ???????Ø´?
hist(geyser)
hist(waiting)

detach(geyser) # detach : ?????Í¸? R ?Ë»? ???Î¿??? Á¦???Ñ´?
hist(waiting)


# ?????? ???? ??, ????, ???? ?×¸??? ?è¿­(1?? slide #8~#11)
x <- 2 # ??Ä¡?? ????
x
a <- "low" # ?????? ????
a

x <- c(2, 2, 4) # ??Ä¡?? ????(combine)
x
a <- c("low", "high", "high") # ?????? ????
a

ls()
str(x)
str(a)

length(x) # ?????? ????
length(a)

y <- c(1.2, 3.0, 4.8)
y

M <- matrix(c(x, y), ncol=2) # ???? ???? ?? matrix ????, ???â¼­ ncolÀº dataframe?? ???? ???? ???????Ö´? ?Ô¼?(nrow?? ???? ??)
M

M <- matrix(c(x, y), ncol=2, byrow=F) # ?????? False(?????? Ã¤????)
M
M1 <- matrix(c(x, y), nrow=2)
M1

M1 <- matrix(c(x, y), nrow=2, byrow=T) # ?????? True(?????? Ã¤????)
M1
matrix(c(x, a), ncol=2)
matrix(c(x, a), nrow=2, byrow=T)

L <- list(kor=x, math=y, grade=a) # ?Ù¸? À¯???? ???Í¸? ?????? ?? list() ????
L
M2 <- cbind(x, y) # ???? ?? ?????? ????
M2
M3 <- rbind(x, y) # ???? ?? ?????? ????
M3

nrow(M2) # ?????? ?? ?? ???Ï±?
ncol(M2) # ?????? ?? ?? ???Ï±?

1:10 # ???? ??????
seq(1, 10, 1) # ???? ??????(1???? 10????, 1????À¸??)
seq(0.1, 1.2, 0.11)
rep(1, 10) # 1À» 10?? ?Ýº?

# ?????? Æ¯Á¤ ???Ò¸? ??Äª?Ï±? À§?? ?Îµ??? ?Ï±?
y <- c(1.2, 3.0, 4.8)
y[2] # 2??Â° ?Îµ????? ?Ø´??Ï´? ??
y[2:3] # 2~3??Â° ?Îµ????? ?Ø´??Ï´? ??

c(2, 3)
y[c(2, 3)]
y[1, 3]
y[c(1, 3)]

# ?????? Æ¯Á¤ ???Ò¸? ??Äª?Ï±? À§?? ?Îµ??? ?Ï±?
M1 <- cbind(c(2, 2, 3), c(1.2, 3.0, 4.8))
M1
M1[3, 2]
M1[,2]

M2<- cbind(c(1, 2, 3), c(4.2, 2.1, 1.9)) # ?è¿­ ??????
M2

array(1, 2, 3) # ??Àº Å¸???? ???? ????
array(1, 3)
array(2, 3)
array(c(1, 2, 3), 3)
A <- array(c(M1, M2), c(3, 2, 2)) # c(??, ??, 2??)
A


# ?????? ?í¸®(1?? slide #12~#13)

x <- c(2, 2, 3)
x^3+1 # Á¦??
y <- c(1.2, 3.0, 4.8)
round(x/y, 2) # ?Ý¿Ã¸?
M <- cbind(x, y)
M
t(M) # M?? ??Ä¡(transpose)
M1 <- t(M)%*%M # ?????? ??(*?? Ç¥???? ????, ?????? ?? À§Ä¡?? ?????Ï´? ???Òµé³¢?? ??????)
M1
M1*c(1, 2)
solve(M1) # ??????
solve(M1)%*%M1

# ??Äª???Ä¿? ???? ??À¯???? ??À¯????
E <- eigen(M1, symmetric=T)
E
diag(E$values) # ?ë°¢????
E$vectors %*% diag(E$values)
t(E$vectors)
E$vectors %*% t(E$vectors)
E$vectors %*% diag(E$values) %*% t(E$vectors)


# ?í¸®????(1?? slide#14)
g <- c(T,F,T,T)
g
f <- c(1.2, 2.0, 3.1, 4.9)
f > 3.14 # f?? ???Òµ??? 3.14???? Å¬ ?? True ????

# true-false?? 1-0À¸?? ?Ù²Ù´? ?Ô¼?
as.numeric(f > 3.14)
f1 <- f[f > 3.14]
f1
f[c(F,F,F,T)]
C1 <- c(T,T,F,F)
C2 <- c(T,F,T,F)
C1&C2 # and ??????
C1||C2 # or ??????(?Ï¹????? ?????Ú·Î¼? ???? Ã¹??Â° ?????? ??Å¸??)
C1|C2 # or ??????
!C1


# ??????missing value(1?? slide #15)
# R???? ??????Àº NA(Not available)?? Ç¥??
# ??Ä¡?? ?Æ´? ??À» ???Ï´? NaN(not a number)?? ???????? ???? ????
x <- c(2,2,3,NA)
mean(x) # ????
mean(x, na.rm=T) # NA?? remove?Ñ´Ù´? ?Ç¹?
0/0
1/0
10^seq(100,1000,100) # Inf?? ???Ñ´?(infinite)?? ?Ç¹?


# ????factors(1?? slide #16)
# ????(factors)?Ì¶? ?????? ?????? ?Ç¹?
species <- c(1, 3, 2, 3) # ??Ä¡?? ????

# ?????? ?????? ??È¯
species.f <- factor(species,levels=1:3)
species.f
levels(species.f) <- c("setosa", "versicolor", "virginica")
levels(species.f)
table(species.f)

# ?????? ??????À¸?? ??È¯
species.o <- ordered(species, levels=1:3)
species.o
levels(species.o) <- c("setosa", "versicolor", "virginica")
levels(species.o)
table(species.o)



# ?Ú·áº¯È¯
# ?Ú·á¸¦ ??È¯?Ï¿? ?????? ?ß°??Ï´? ???? ??Àº ?????Ï°? ?Ï¾î³²

x <- c(45, 32, 34, 28, 80)
y <- c(23, 37, 12, 76, 65)
d2 <- list(kor=x, eng=y)
d2

# d2?? tot?????? ?ß°??Ï¿? d2a???? ????Æ®?? ??????
d2a <- transform(d2, tot=kor+eng)
d2a
d3 <- subset(d2a, tot>100)
d3


# ????Á¤?Ä°? ??À§(1?? slide #18)
x <- c(12,6,4,7,8)
sort(x) # Á¤???Ï´? ?Ô¼?
order.x <- order(x) # ???? ?? ?????? ?Á·????? ???Ò¸? ??Å°???? Á¤???Ï¿? À§Ä¡?? ?????Ï´? ?Ô¼?
order.x
x[order.x]
y <- c(34,26,14,57,92)
y[order.x] # ???? y?? x?? ?????? ???? Á¤??
rank(x) # ??À§?? ???Ï´? ?Ô¼?
x1 <- c(12,12,4,7,8)
rank(x1)
rank(x1, ties.method=c("first")) # tied rank(????À§)
# ??Àº ???? ???Ø¼??? ?????? ??À§?? Á¤????
rank(x1, ties.method=c("random"))


# apply??: ?????? ????Æ®?? ?? or ???? ???? ?Ô¼??? ????(1?? slide #19)
geyser <- read.table("geyser299.txt", header=T)
apply(geyser,2,median) # ???â¼­ 1Àº ??À» ?Ç¹?, 2?Ì¸? ??À» ?Ç¹??? // medianÀº ??À§??
apply(geyser,1,median)

apply(geyser,2,sum) # sumÀº ?Õ°?
apply(geyser,1,sum)

hist(apply(geyser,1,sum))
summary(apply(geyser,1,sum)) # R?? ??Ç¥???? ???????? ?Ô¼?: min, median, mean, 3rd Qu, max?? ?????? ????
la <- lapply(geyser,median) # apply?? ?????? ????Æ®?? ??????
la
a <- apply(geyser,median)
a


# ????loop(1?? slide #20)

a <- rep(1, 20)
for(i in 3:100) # 3???? 100?????? ???Úµé¿¡
  a[i] <- a[i-1] + a[i-2] # ??À½?? ??Àº ????À» ????
a[a<100] # ?Çº???Ä¡???? ???Âµ?

a <- rep(1, 20) # ?Ýº??Û¾??? 2?? ?Ì»??? ???? ?ß°?È£ ????
b <- rep(1, 20)
for(i in 3:20)
  { a[i] <- a[i-1] + a[i-2]
  b[i] <- b[i-1] + (-1)^(i-1)*b[i-2]}
b[b<100]

# ???Ïº????Îº??? ???? ???? ??????Å°?? ?Ô¼?(1?? slide #21)
x <- runif(400,-1,1) # random uniform distribution -1???? 1?????? ?????? ?? 400??
x
hist(x)

# Á¤?Ôº????Îº??? ???? ???? ??????Å°?? ?Ô¼?
# rnorm(n, mean???????? ????, ???????? Ç¥??????) random norm
x <- rnorm(400, 0, 1)
x
hist(x) # bell-shapled

# ???×º????Îº??? ???? ???? ????
# rbinom(n, size, probability)
x <- rbinom(1000, 10, 0.5) # 0~10 ?????? Á¤???? ?????? ?? ??À½
hist(x)
table(x)

# ???Æ¼Ûº????Îº??? ???? ???? ????
# rpois(????, ???Æ¼Ûº????? ????)
x <- rpois(1000, 5)
hist(x)


# ??Á¡??(1?? slide #22)
geyser <- read.table("geyser299.txt", header=T)
attach(geyser)
plot(duration~waiting)
# x???? ??À§?? 40???? 110À¸??, y???? ??À§?? 1???? 6À¸?? Á¶Á¤?Ï°?
# ???Ìº??? Á¦?? ?Ù²Ù±?
plot(duration~waiting, xlim=c(40,110), ylim=c(1,6), xlab="waiting time(min)", ylab="duration", main="Geyser")
text(x=waiting, y=duration, cex=0.75)
#???Ì½???È£?? ??Á¤ cex?? ????È®?? ?Î¼?

#??Å¸???? ???Ç»???(1?? slide #23)
x1 <- rbeta(400, 1, 1)
x2 <- rbeta(400, 2, 2)
x4 <- rbeta(400, 4, 4)
x8 <- rbeta(400, 8, 8)

# ???? ???????? ???? ?Á·??? ?×·??Á°? Á¦?Ãµ?, ???? ?????? mfcol
par(mfrow=c(2,2))
hist(x1, breaks=seq(0, 1, 0.1), freq=F, ylim=c(0, 3))
hist(x2, breaks=seq(0, 1, 0.1), freq=F, ylim=c(0, 3))
hist(x4, breaks=seq(0, 1, 0.1), freq=F, ylim=c(0, 3))
hist(x8, breaks=seq(0, 1, 0.1), freq=F, ylim=c(0, 3))

# ?×·??? ???? ?×¸???(1?? slide #24)
# ??À¯?? 5?? t?????Îº??? ?????? ???? ?????Í¿?
# ?? ?????Í¿? ?????? ???Õ°? Ç¥???????? ???? Á¤?Ôº??? ?î¼±À» ?Ö±?

par(mfrow=c(1, 1))
t <- rt(1000, 5)
hist(t, freq=F, xlim=c(-5, 5), ylim=c(0, 0.4),
     nclass=20, xlab="simulated observations", main="t(df 5)")
curve(dnorm(x, mean(t), sd(t), add=T))
# ?ß¾Ó¿????? ?????Í¹Ðµ??? Á¤?Ôº??????? ?????Ï´? ?Íº??? ????
# ?? ???? ?Î±Ù¿????? ?????Í¹Ðµ??? Á¤?Ôº??????? ?????Ï´? ?Íº??? ??À½
# ???? ?ÎºÐ¿? ??????À¸?? Æ¯?Ì°??? Á¸????

# ?????? Á¤?? ?Ô¼?(1?? slide #25)
skew.and.kurto <- function(x)
{
  num1 <- mean((x-mean(x))^3)
  denom1 <- mean((x-mean(x))^2)^1.5
  num2 <- mean((x-mean(x))^4)
  denom2 <- mean((x-mean(x))^2)^2
  skew <- num1/denom1
  kurto <- num2/denom2 - 3
  return(c(skew,kurto))
}

# ?????? Á¤?? ?Ô¼?(1?? slide #26)
t5 <- rt(1000, 5) #1000 random obs from t with df 5
round(skew.and.kurto(t5), 3)
z <- rnorm(1000) #1000 random obs from N(0,1)
round(skew.and.kurto(z), 3)
u <- runif(1000) #1000 random obs from U(0,1)
round(skew.and.kurto(u), 3)

# ?????? Á¤???Ô¼? ??Ä¢
# function()À¸?? Á¤?ÇµÇ¾??? ??
# ???? ?ß°?È£?? ?À¸??? ?ß°?È£?? ????????
# ??Á¾ ?Ñ°?Á®??(return)?? ?????? ??Á¤?Ø¾???

# ?????? ?????Ï±?(1?? slide #27)
data1 <- read.table("mid.txt", header= T)
data2 <- read.table("final.txt", header = T)
# id?? Å°?? ?Ï¿? ????
data1.and.2 <- merge(x=data1, y=data2, by.x="id", by.y="ID")
data1.and.2
# Å°?? ???Ê¿??? ?Ö¾îµµ ?????Ï°? ?Ï·Á¸? all=T ?ß°?
data1.and.2 <- merge(x=data1, y=data2, by.x="id", by.y="ID", all=T)
data1.and.2

# ?????? ??Æ® ?????Ï±? (1?? slide #28)
gr <- c(1,2,1,1,2)
gr
gr <- factor(gr)
gr
levels(gr) <- c("low", "high")
levels(gr)

score <- c(98, 82, 45, 23, 74)
score.split <- split(score, gr)
score.split
score1 <- score[gr == "low"]
score2 <- score[gr == "high"]
score1
score2

# ?Üº? ?????? ???? ?Ð¾??À±?(1?? slide #29)
# ?????? ?? ????À» R???? ??À¸?Á¸?
# CSV(Comma Separated Variables)???? ???Â·? ?Ç¾??Ö¾?????
score1 <- read.csv("score1.csv", header=T)
score1
# SPSS ?????Í³? SAS ????À» ??À¸?Á¸? foreign library ????
library(foreign)
ee <- read.spss("EEstock2000.csv")
str(ee)

# R ?Û¾?????(1?? slide #30)
ls() # ???? ?Û¾?Ã¢?? ???Ïµ? ?Àº?Á§Æ® ????Æ®
rm(a, b, data1)
ls()
rm(list=ls()) # ???? ?Àº?Á§Æ® ???Ö±?
ls()

# Æ¯Á¤ ????À» ?Ø½?Æ®?? ?????Ï±?
geyser <- read.table("geyser299.txt", header=T)
x <- rbinom(n=299, size=1, prob=0.50)
geyser.x <- cbind(geyser, x)
write.table(geyser.x, "geyser1.txt")
